var express = require('express');var router = express.Router();var con=require('../../modules/admin/mysql');var ejs=require('ejs');//请求页面router.get('/', function(req, res, next) {    con.query('select * from hbarner',function (err,rul,fiels) {        if(err)throw err;        //数据处理，以及网页请求        res.render('./admin/adv', { data : rul });    });});//添加数据router.post('/',function(req,res,next){    var title=req.body.title;    var url=req.body.url;    var img=req.body.img;    var mao=req.body.mao;    con.query('insert into hbarner (title,url,img,mao) value(?,?,?,?)',[title,url,img,mao],function (err,rul,fiels) {        if(err)throw err;        console.dir(rul);        res.redirect('/hadv');    });});//删除数据请求router.get('/del/:id',function (req,res,next) {    console.dir(req.params.id);    var id=req.params.id;    con.query('delete from hbarner where id=?',[id],function(err,rul,fiels){        if(err)throw err;        res.redirect('/hadv');    });});//添加数据请求router.get('/addwoman/:id',function(req,res,next){    console.dir(req.params.id);    con.query('select * from hbarner',function (err,rul,fiels) {        if(err)throw err;        if(rul.length){            res.render('./admin/addwoman',{ data:rul });        }    });});router.post('/gai',function (req,res,next) {console.dir(req.body);    var id=req.body.id;    var title=req.body.title;    var mao=req.body.mao;    var img=req.body.img;    var url=req.body.url;    con.query('update hbarner set title=?,img=?,url=?,mao=?  where id=?',[title,img,url,mao,id],function (err,rul,fiels) {        if(err)throw err;        console.dir(rul);        if (rul.affectedRows>0){            res.redirect('/hadv');        }else{            res.redirect('/habv/addwoman');        }    });});module.exports = router;